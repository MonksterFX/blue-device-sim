"use strict";var typed=(()=>{var m=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var p=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},z=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of I(t))!A.call(e,n)&&n!==r&&m(e,n,{get:()=>t[n],enumerable:!(o=U(t,n))||o.enumerable});return e};var D=e=>z(m({},"__esModule",{value:!0}),e);var V={};p(V,{ArrayBufferDecoder:()=>l,ArrayBufferEncoder:()=>w,ArrayBufferError:()=>f,BufferError:()=>d,ValidationError:()=>c,generateTypeHints:()=>b,types:()=>g});function B(e){return e===0||e===void 0?{name:"String",size:0,encode:t=>{if(typeof t!="string")throw new Error("Value must be a string");return new TextEncoder().encode(t).buffer},decode:(t,r=0)=>new TextDecoder().decode(t),validate:t=>typeof t=="string"}:{name:`String(${e})`,size:e,encode:t=>{let r=new ArrayBuffer(e),n=new TextEncoder().encode(t.padEnd(e,"\0").slice(0,e));return new Uint8Array(r).set(n),r},decode:(t,r)=>new TextDecoder().decode(new Uint8Array(t,r,e)).replace(/\0+$/,""),validate:t=>typeof t=="string"&&t.length<=e}}function x(e,t){return{name:`${e.name}(${t})`,size:e.size,encode:r=>{let o=new ArrayBuffer(e.size),n=new DataView(o);switch(e.name){case"Uint16":n.setUint16(0,r,t==="little");break;case"Uint32":n.setUint32(0,r,t==="little");break;case"Int16":n.setInt16(0,r,t==="little");break;case"Int32":n.setInt32(0,r,t==="little");break;case"Float32":n.setFloat32(0,r,t==="little");break;case"Double":n.setFloat64(0,r,t==="little");break;default:return e.encode(r)}return o},decode:(r,o)=>{let n=new DataView(r);switch(e.name){case"Uint16":return n.getUint16(o,t==="little");case"Uint32":return n.getUint32(o,t==="little");case"Int16":return n.getInt16(o,t==="little");case"Int32":return n.getInt32(o,t==="little");case"Float32":return n.getFloat32(o,t==="little");case"Double":return n.getFloat64(o,t==="little");default:return e.decode(r,o)}},validate:e.validate}}var g={Uint8:{name:"Uint8",size:1,encode:e=>{let t=new ArrayBuffer(1);return new Uint8Array(t)[0]=e,t},decode:(e,t)=>new Uint8Array(e,t,1)[0],validate:e=>Number.isInteger(e)&&e>=0&&e<=255},Uint16:{name:"Uint16",size:2,encode:e=>{let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e,!0),t},decode:(e,t)=>new DataView(e).getUint16(t,!0),validate:e=>Number.isInteger(e)&&e>=0&&e<=65535},Uint32:{name:"Uint32",size:4,encode:e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),t},decode:(e,t)=>new DataView(e).getUint32(t,!0),validate:e=>Number.isInteger(e)&&e>=0&&e<=4294967295},Int8:{name:"Int8",size:1,encode:e=>{let t=new ArrayBuffer(1);return new Int8Array(t)[0]=e,t},decode:(e,t)=>new Int8Array(e,t,1)[0],validate:e=>Number.isInteger(e)&&e>=-128&&e<=127},Int16:{name:"Int16",size:2,encode:e=>{let t=new ArrayBuffer(2);return new DataView(t).setInt16(0,e,!0),t},decode:(e,t)=>new DataView(e).getInt16(t,!0),validate:e=>Number.isInteger(e)&&e>=-32768&&e<=32767},Int32:{name:"Int32",size:4,encode:e=>{let t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!0),t},decode:(e,t)=>new DataView(e).getInt32(t,!0),validate:e=>Number.isInteger(e)&&e>=-2147483648&&e<=2147483647},Float32:{name:"Float32",size:4,encode:e=>{let t=new ArrayBuffer(4);return new DataView(t).setFloat32(0,e,!0),t},decode:(e,t)=>new DataView(e).getFloat32(t,!0),validate:e=>typeof e=="number"},Double:{name:"Double",size:8,encode:e=>{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),t},decode:(e,t)=>new DataView(e).getFloat64(t,!0),validate:e=>typeof e=="number"},Boolean:{name:"Boolean",size:1,encode:e=>{let t=new ArrayBuffer(1);return new Uint8Array(t)[0]=e?1:0,t},decode:(e,t)=>new Uint8Array(e,t,1)[0]!==0,validate:e=>typeof e=="boolean"},String:B,Endian:x};function b(e){return e.map(r=>r.name==="String"?r.size?`String(${r.size})`:"String":r.name).join(",")}var f=class extends Error{constructor(t){super(t),this.name="ArrayBufferError"}},c=class extends f{constructor(t){super(t),this.name="ValidationError"}},d=class extends f{constructor(t){super(t),this.name="BufferError"}};var w=class{encode(t,r){if(r.length===1&&r[0].name==="String"){if(!r[0].validate(t[0]))throw new c("Value must be a string");return new Uint8Array(r[0].encode(t))}if(t.length!==r.length)throw new c("Data length must match types length");let o=r.reduce((a,i)=>a+i.size,0),n=new ArrayBuffer(o),s=0;for(let a=0;a<t.length;a++){let i=t[a],u=r[a];if(!u.validate(i))throw new c(`Invalid value for type ${u.name}: ${i}`);let y=u.encode(i);new Uint8Array(n,s,u.size).set(new Uint8Array(y)),s+=u.size}return new Uint8Array(n)}};var l=class{decode(t,r){let o=t.buffer;if(r.length===1&&r[0].name==="String")return r[0].decode(o,0);let n=r.reduce((i,u)=>i+u.size,0);if(o.byteLength<n)throw new d("Buffer too small for types");let s=[],a=0;for(let i of r){let u=i.decode(o,a);s.push(u),a+=i.size}return s}};return D(V);})();
